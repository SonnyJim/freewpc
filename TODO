The following list of work items was generated by grepping for "TODO"
through the code, then sorted according to feature and priority.

Poor Design
* task_set_arg() still used in some places, inefficient.
* Remove gendefines???
* "Idle" functions aren't really idle... see 'timing' branch
* Sound/music management is extremely poor.
* Teach gencallset to ignore code that isn't being compiled in.
* Replace FIF with something more intelligent.  In Progress.
* Move printf and game state machine code out of the system page.
* Deal with common page getting full. (Started)
* Get rid of RTTs for high/low solenoid banks that are all pulsed now,
and reclaim sol_timers[] direct spots.  In the same vein, flashlamps
need a different method.


Missing Feature
* Lamp power saver level
* Abort after so many ball searches, or try another method (chase ball?)
* Coin Door Ballsave
* Burnin
* Lamp strobing, like newer Sterns
* deff_nice
* Flasher allocation for lamp effects
* Add lock magnet/Magna-Goalie/goalie driver
* Sound effects cannot alter volume temporarily


Bugs
* Briefly ignore switch row/column on ground/short.
* TZ clock decoding is not perfect.
* When changing adjustments, 'confirmation' screen does not work. (True??)
* Factory defaults should be different per country code.
* Switch levels/edges tests do not work.  In Progress.
* DCS sound bringup does not work well


Compiler Changes
* Multiply by 16 should not be unrolled to shift; mul works best.
* sprintf() jump table per character is way too large.
* Non-variadic arguments in a variadic function are OK to place in
registers.
* GCC 4.4 generated sol.s is inefficient.


Nice to Have
* ./include/freewpc.h:/* TODO - move these elsewhere */
* ./include/freewpc.h:/* Uncommon software modules - TODO : shouldn't automatically include */
* ./include/printf.h:/* TODO : much of this is implementing a 'varargs' type facility.
* Score sweeping for player up
* ./kernel/font.c:		/* TODO - use a real strcpy() here that is more efficient */
* ./kernel/frame.c:			/* TODO - use word copies if possible */

Uncategorized

./common/device.c:/* TODO : is this needed?  Can use sys_init_complete instead? */
./common/device.c:			 * TODO - how to do this is also device-specific. */
./common/device.c:			 * TODO : this should be a global event that other modules
./common/device.c:		/* TODO - this logic probably belongs somewhere else.
./common/device.c:		/* TODO - this logic probably belongs somewhere else */
./common/device.c:#if 0 /* TODO */
./common/device.c:	/* TODO - if a ball kicked out from the probe of a device
./common/locale.c:/* TODO - support on-the-fly DIP switch changes.  Poll them about
./common/plunger.c:	/* TODO - none of this logic works if the shooter switch is broken.
./common/plunger.c:		/* TODO - after locking a ball, adding a new ball to the
./common/rtc.c:	/* TODO - should read this from the native system */
./common/trough.c:		/* TODO : For TZ, this keeps a ball on the outhole even
./include/m6809/m6809.h: * TODO - for small, odd values of N, no optimization is
./include/m6809/m6809.h:	/* TODO - memcpy isn't always going to work */
./include/mode.h:	/* TODO */
./include/mode.h:		/* TODO */
./include/sys/switch.h: * the same ball.  TODO : the check for live balls should not apply in
./kernel/animation.c:	/* TODO : for video modes there should be a callback here for
./kernel/deff.c:	/* TODO */
./kernel/frame.c:	/* TODO - remove this and force all callers of the
./kernel/leff.c: * (TODO : as long as they do not use the same lamps!.)   There are
./kernel/leff.c:	/* TODO - this is slow */
./kernel/leff.c:		lamp_leff1_erase (); /* TODO : these two functions go together */
./kernel/printf.c:					/* TODO : this used to be a 'register' variable, but
./kernel/printf.c:	/* TODO - detect buffer overflow here and signal an error */
./kernel/sound.c:	/* TODO : do something like this elsewhere for sound syncing */
./kernel/sound.c:	task_sleep (TIME_200MS); /* TODO : needed? */
./kernel/timer.c:		if (0) /* TODO : add condition that ball is live */


Uncategorized Machine Code


./machine/t2/drop.c:	/* TODO - debounce drops */
./machine/tz/amode.c:/* TODO : use flipcode module to implement this */
./machine/tz/autofire.c:	/* TODO : balls landing here when not expected
./machine/tz/autofire.c:	/* TODO - If the autofire switch trips during the 'open
./machine/tz/autofire.c:		/* TODO : these sleeps should be done in the spawned task,
./machine/tz/autofire.c:	/* TODO - don't always want to launch right away, e.g. for
./machine/tz/autofire.c:	/* TODO : Poll the autofire switches and empty it if something
./machine/tz/clocktest.c:	/* TODO : this should be common logic */
./machine/tz/door.c:		/* TODO : When called from the camera award, this always
./machine/tz/gumball.c:	/* TODO : when ball searching at game start, see if the
./machine/tz/gumball_test.c:		/* TODO - poll more frequently, and draw less often */
./machine/tz/loop.c:		/* TODO : count powerball loops and award bonuses
./machine/tz/multiball.c:/* TODO - on a missed left ramp exit switch, use the
./machine/tz/powerball.c:			/* TODO - in the 'maybe' state, pulse magnets to
./machine/tz/powerball.c:		/* TODO : music is not being stopped correctly if Powerball
./machine/tz/powerball.c:		TODO : better deff management would eliminate the need for
./machine/tz/powerball.c:	/* TODO : if this switch triggers and we did not expect
./machine/tz/powerball_test.c:/* TODO : copied from powerball.c */
./machine/tz/skill.c:	TODO : genmachine can be made to generate two events here,
./machine/tz/sssmb.c:		/* TODO: handle case where red jackpot switch is tripped but

./platform/wpc/task.c:		/* TODO : if there are no free blocks, it might be possible
./platform/wpc/task.c:	/* TODO - verify that interrupts are not disabled when calling this */
./platform/wpc/task.c:	TODO : the accuracy here is a bit wonky.  For example, a task could
./platform/wpc/task.c:	/* TODO: on entry to the next function, it is expected that 'X' has
./platform/wpc/task.c: * TODO : why not just set the B/X register directly here and then
./test/adjust.c:/* TODO - these really belong in feature_config.  They are not being
./test/window.c:/* TODO - if no solenoids/flashers defined, solenoid_test_ok
./test/window.c:/* TODO - these two window ops are identical; we are only
./test/window.c:	/* TODO : lamp_flasher_test_item */
./test/window.c:	/* TODO : ordered_lamp_test_item */
